<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåû Gerador de Propostas Solar - VOLTTAIC Style</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
            
            .page-break {
                page-break-before: always;
            }
            
            .container-print {
                max-width: 100% !important;
                padding: 0 !important;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Formul√°rio de Entrada (Oculto na impress√£o) -->
    <div class="no-print">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <!-- Cabe√ßalho -->
            <div class="bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-lg shadow-lg p-8 mb-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-4xl font-bold mb-2">üåû Gerador de Propostas Solar</h1>
                        <p class="text-blue-100 text-lg">Sistema profissional de dimensionamento e c√°lculo financeiro</p>
                    </div>
                    <a href="config.html" class="bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-blue-50 transition">
                        ‚öôÔ∏è Configura√ß√µes
                    </a>
                </div>
            </div>

            <!-- Status de Conex√£o Supabase -->
            <div id="supabase-status" class="p-3 rounded-lg border bg-yellow-100 text-yellow-800 border-yellow-300 mb-4">
                ‚ö†Ô∏è Inicializando conex√£o com Supabase...
            </div>

            <!-- Dados do Cliente -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <span class="mr-2">üìã</span> Dados do Cliente
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Nome do Cliente *</label>
                        <input type="text" id="nome-cliente" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Empresa</label>
                        <input type="text" id="empresa-cliente" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">CPF/CNPJ</label>
                        <input type="text" id="cpf-cnpj" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Telefone</label>
                        <input type="tel" id="telefone-cliente" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">E-mail</label>
                        <input type="email" id="email-cliente" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
            </div>

            <!-- Grupo Tarif√°rio -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <span class="mr-2">‚ö°</span> Grupo Tarif√°rio
                </h2>
                <div class="mb-4">
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Selecione o Grupo</label>
                    <select id="grupo-tarifario" class="w-full md:w-1/2 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onchange="alternarCamposGrupo()">
                        <option value="B">Grupo B - Residencial/Comercial</option>
                        <option value="B-Optante">Grupo B - Optante</option>
                        <option value="A">Grupo A - Consumidor Industrial</option>
                    </select>
                </div>

                <!-- Campos Grupo B -->
                <div id="campos-grupo-b">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4 mt-6">Consumo e Tarifas</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Consumo Total Mensal (kWh) *</label>
                            <input type="number" id="consumo-total" step="0.01" min="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Tarifa de Consumo (R$/kWh) *</label>
                            <input type="number" id="tarifa-consumo" step="0.0001" min="0" value="0.95" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Custo de Ilumina√ß√£o P√∫blica (R$)</label>
                            <input type="number" id="custo-iluminacao" step="0.01" min="0" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- Campos Grupo A -->
                <div id="campos-grupo-a" style="display: none;">
                    <h3 class="text-lg font-semibold text-gray-700 mb-4 mt-6">‚ö° Consumo por Hor√°rio</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Consumo Ponta (kWh) *</label>
                            <input type="number" id="consumo-ponta" step="0.01" min="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Tarifa Ponta (R$/kWh) *</label>
                            <input type="number" id="tarifa-ponta" step="0.0001" min="0" value="1.25" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Consumo Fora Ponta (kWh) *</label>
                            <input type="number" id="consumo-fora-ponta" step="0.01" min="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Tarifa Fora Ponta (R$/kWh) *</label>
                            <input type="number" id="tarifa-fora-ponta" step="0.0001" min="0" value="0.65" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Demanda Contratada (kW)</label>
                            <input type="number" id="demanda-contratada" step="0.01" min="0" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Tarifa de Demanda (R$/kW)</label>
                            <input type="number" id="tarifa-demanda" step="0.01" min="0" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Outros Valores -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <span class="mr-2">üí∞</span> Custos Adicionais
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Outros Valores (R$)</label>
                        <input type="number" id="outros-valores" step="0.01" min="0" value="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <p class="text-sm text-gray-500 mt-1">Ex: custos extras de instala√ß√£o, adapta√ß√µes, etc.</p>
                    </div>
                </div>
            </div>

            <!-- Bot√µes de A√ß√£o -->
            <div class="flex gap-4 mb-8">
                <button onclick="gerarProposta()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition transform hover:scale-105">
                    üßÆ Gerar Proposta
                </button>
                <button onclick="novaProposta()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition">
                    üîÑ Nova Proposta
                </button>
            </div>
        </div>
    </div>

    <!-- Proposta Gerada (Vis√≠vel na impress√£o) -->
    <div id="secao-resultados" style="display: none;" class="container-print max-w-7xl mx-auto px-4 py-8">
        <!-- Cabe√ßalho da Proposta -->
        <div class="bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-lg shadow-lg p-8 mb-6">
            <div class="flex justify-between items-start">
                <div>
                    <h1 class="text-4xl font-bold mb-2">üåû PROPOSTA COMERCIAL</h1>
                    <p class="text-xl text-blue-100">Gera√ß√£o de Energia Solar Fotovoltaica</p>
                </div>
                <div class="text-right">
                    <p class="text-sm text-blue-100">Data:</p>
                    <p class="text-lg font-semibold" id="header-data-proposta">--/--/----</p>
                </div>
            </div>
            <div class="mt-6 border-t border-blue-400 pt-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <p class="text-sm text-blue-100">Cliente:</p>
                        <p class="text-lg font-semibold" id="header-nome-cliente">-</p>
                    </div>
                    <div>
                        <p class="text-sm text-blue-100">Empresa:</p>
                        <p class="text-lg font-semibold" id="header-empresa-cliente">-</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cards de Resultados Principais -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
            <!-- Card Investimento -->
            <div class="bg-gradient-to-br from-blue-500 to-blue-700 text-white rounded-lg shadow-lg p-6 transform transition hover:scale-105">
                <div class="text-center">
                    <div class="text-5xl mb-2">üí∞</div>
                    <h3 class="text-lg font-semibold mb-2">Investimento Total</h3>
                    <p class="text-3xl font-bold" id="card-investimento">R$ 0,00</p>
                    <p class="text-sm text-blue-100 mt-2">Kit Completo + Instala√ß√£o</p>
                </div>
            </div>

            <!-- Card Economia -->
            <div class="bg-gradient-to-br from-green-500 to-green-700 text-white rounded-lg shadow-lg p-6 transform transition hover:scale-105">
                <div class="text-center">
                    <div class="text-5xl mb-2">‚ö°</div>
                    <h3 class="text-lg font-semibold mb-2">Economia Mensal</h3>
                    <p class="text-3xl font-bold" id="card-economia">R$ 0,00</p>
                    <p class="text-sm text-green-100 mt-2">M√©dia Estimada</p>
                </div>
            </div>

            <!-- Card Redu√ß√£o -->
            <div class="bg-gradient-to-br from-yellow-500 to-yellow-700 text-white rounded-lg shadow-lg p-6 transform transition hover:scale-105">
                <div class="text-center">
                    <div class="text-5xl mb-2">üìâ</div>
                    <h3 class="text-lg font-semibold mb-2">Redu√ß√£o de Custos</h3>
                    <p class="text-3xl font-bold" id="card-reducao">0%</p>
                    <p class="text-sm text-yellow-100 mt-2">Da Conta de Energia</p>
                </div>
            </div>

            <!-- Card Payback -->
            <div class="bg-gradient-to-br from-orange-500 to-orange-700 text-white rounded-lg shadow-lg p-6 transform transition hover:scale-105">
                <div class="text-center">
                    <div class="text-5xl mb-2">‚è≥</div>
                    <h3 class="text-lg font-semibold mb-2">Payback</h3>
                    <p class="text-3xl font-bold" id="card-payback">0 anos</p>
                    <p class="text-sm text-orange-100 mt-2">Retorno do Investimento</p>
                </div>
            </div>
        </div>

        <!-- Gr√°ficos -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Gr√°fico de Compara√ß√£o -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">üìä Comparativo de Custos</h3>
                <div style="height: 300px;">
                    <canvas id="graficoComparacao"></canvas>
                </div>
            </div>

            <!-- Gr√°fico de Economia Acumulada -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4">üìà Economia Acumulada</h3>
                <div style="height: 300px;">
                    <canvas id="graficoEconomia"></canvas>
                </div>
            </div>
        </div>

        <!-- Detalhes T√©cnicos -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6 page-break">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <span class="mr-2">üîß</span> Especifica√ß√µes da Usina Solar
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div class="flex justify-between border-b border-gray-200 pb-2">
                        <span class="font-semibold text-gray-700">Pot√™ncia do Sistema:</span>
                        <span class="text-gray-900 font-bold" id="det-potencia">0 kWp</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-200 pb-2">
                        <span class="font-semibold text-gray-700">Gera√ß√£o M√©dia Mensal:</span>
                        <span class="text-gray-900 font-bold" id="det-geracao">0 kWh</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-200 pb-2">
                        <span class="font-semibold text-gray-700">Quantidade de M√≥dulos:</span>
                        <span class="text-gray-900 font-bold" id="det-placas">0 unidades</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-200 pb-2">
                        <span class="font-semibold text-gray-700">√Årea Necess√°ria:</span>
                        <span class="text-gray-900 font-bold" id="det-area">0 m¬≤</span>
                    </div>
                </div>
                <div class="space-y-4">
                    <div class="flex justify-between border-b border-gray-200 pb-2">
                        <span class="font-semibold text-gray-700">Modelo do M√≥dulo:</span>
                        <span class="text-gray-900 font-bold" id="det-modulo">-</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-200 pb-2">
                        <span class="font-semibold text-gray-700">Modelo do Inversor:</span>
                        <span class="text-gray-900 font-bold" id="det-inversor">-</span>
                    </div>
                    <div class="flex justify-between border-b border-gray-200 pb-2">
                        <span class="font-semibold text-gray-700">Estrutura de Fixa√ß√£o:</span>
                        <span class="text-gray-900 font-bold" id="det-estrutura">-</span>
                    </div>
                </div>
            </div>

            <!-- Garantias -->
            <div class="mt-6 bg-blue-50 rounded-lg p-4">
                <h3 class="text-lg font-bold text-blue-800 mb-3">üõ°Ô∏è Garantias</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                    <div class="flex items-start">
                        <span class="text-2xl mr-2">‚úÖ</span>
                        <div>
                            <p class="font-semibold text-gray-800">30 Anos</p>
                            <p class="text-gray-600">Efici√™ncia dos M√≥dulos</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <span class="text-2xl mr-2">‚úÖ</span>
                        <div>
                            <p class="font-semibold text-gray-800">25 Anos</p>
                            <p class="text-gray-600">Garantia de Fabrica√ß√£o</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <span class="text-2xl mr-2">‚úÖ</span>
                        <div>
                            <p class="font-semibold text-gray-800">10 Anos</p>
                            <p class="text-gray-600">Garantia do Inversor</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Op√ß√µes de Financiamento -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                <span class="mr-2">üí≥</span> Op√ß√µes de Pagamento
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Cart√£o de Cr√©dito -->
                <div class="border border-blue-200 rounded-lg p-5 bg-blue-50">
                    <div class="text-3xl mb-3 text-center">üí≥</div>
                    <h3 class="text-lg font-bold text-blue-800 mb-2 text-center" id="fin-1-tipo">Cart√£o de Cr√©dito</h3>
                    <p class="text-sm text-gray-600 mb-3 text-center" id="fin-1-descricao">At√© 6 cart√µes diferentes</p>
                    <div class="bg-white rounded p-3 mb-2">
                        <p class="text-xs text-gray-600">Parcelas:</p>
                        <p class="text-2xl font-bold text-gray-900"><span id="fin-1-parcelas">21x</span> de <span id="fin-1-valor">R$ 0,00</span></p>
                    </div>
                    <p class="text-xs text-gray-500 text-center" id="fin-1-obs">Parcelamento direto</p>
                </div>

                <!-- Boleto Banc√°rio -->
                <div class="border border-green-200 rounded-lg p-5 bg-green-50">
                    <div class="text-3xl mb-3 text-center">üè¶</div>
                    <h3 class="text-lg font-bold text-green-800 mb-2 text-center" id="fin-2-tipo">Boleto Banc√°rio</h3>
                    <p class="text-sm text-gray-600 mb-3 text-center" id="fin-2-descricao">Entrada + Parcelamento</p>
                    <div class="bg-white rounded p-3 mb-2">
                        <p class="text-xs text-gray-600">Entrada: <span id="fin-2-entrada" class="font-bold">R$ 0,00</span></p>
                        <p class="text-2xl font-bold text-gray-900 mt-1"><span id="fin-2-parcelas">10x</span> de <span id="fin-2-valor">R$ 0,00</span></p>
                    </div>
                    <p class="text-xs text-gray-500 text-center" id="fin-2-obs">20% entrada + 10x</p>
                </div>

                <!-- Financiamento BV -->
                <div class="border border-orange-200 rounded-lg p-5 bg-orange-50">
                    <div class="text-3xl mb-3 text-center">üè¶</div>
                    <h3 class="text-lg font-bold text-orange-800 mb-2 text-center" id="fin-3-tipo">Financiamento BV</h3>
                    <p class="text-sm text-gray-600 mb-3 text-center" id="fin-3-descricao">60 meses</p>
                    <div class="bg-white rounded p-3 mb-2">
                        <p class="text-xs text-gray-600">Car√™ncia: <span class="font-bold">90 dias</span></p>
                        <p class="text-2xl font-bold text-gray-900 mt-1"><span id="fin-3-parcelas">60x</span> de <span id="fin-3-valor">R$ 0,00</span></p>
                    </div>
                    <p class="text-xs text-gray-500 text-center" id="fin-3-obs">Sujeito a an√°lise</p>
                </div>
            </div>
        </div>

        <!-- Escopo e Prazos -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <!-- Servi√ßos Inclu√≠dos -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-bold text-green-700 mb-4 flex items-center">
                    <span class="mr-2">‚úÖ</span> Servi√ßos INCLU√çDOS
                </h2>
                <ul class="space-y-2 text-sm">
                    <li class="flex items-start">
                        <span class="text-green-600 mr-2">‚úì</span>
                        <span>Dimensionamento completo do sistema</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-green-600 mr-2">‚úì</span>
                        <span>Projeto el√©trico e memorial descritivo</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-green-600 mr-2">‚úì</span>
                        <span>Todos os equipamentos (m√≥dulos, inversores, estruturas)</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-green-600 mr-2">‚úì</span>
                        <span>Instala√ß√£o completa e comissionamento</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-green-600 mr-2">‚úì</span>
                        <span>Homologa√ß√£o junto √† concession√°ria</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-green-600 mr-2">‚úì</span>
                        <span>Sistema de monitoramento remoto</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-green-600 mr-2">‚úì</span>
                        <span>Treinamento de opera√ß√£o</span>
                    </li>
                </ul>
            </div>

            <!-- Servi√ßos N√ÉO Inclu√≠dos -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-bold text-red-700 mb-4 flex items-center">
                    <span class="mr-2">‚ùå</span> Servi√ßos N√ÉO INCLU√çDOS
                </h2>
                <ul class="space-y-2 text-sm">
                    <li class="flex items-start">
                        <span class="text-red-600 mr-2">‚úó</span>
                        <span>Refor√ßo estrutural do telhado</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-600 mr-2">‚úó</span>
                        <span>Obras civis e adequa√ß√µes prediais</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-600 mr-2">‚úó</span>
                        <span>Reparos na instala√ß√£o el√©trica existente</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-600 mr-2">‚úó</span>
                        <span>Adequa√ß√µes no padr√£o de entrada</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-600 mr-2">‚úó</span>
                        <span>Taxas da concession√°ria (se aplic√°vel)</span>
                    </li>
                    <li class="flex items-start">
                        <span class="text-red-600 mr-2">‚úó</span>
                        <span>Limpeza e manuten√ß√£o peri√≥dica dos m√≥dulos</span>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Prazos -->
        <div class="bg-gradient-to-r from-purple-500 to-purple-700 text-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4 flex items-center">
                <span class="mr-2">‚è±Ô∏è</span> Prazos M√©dios
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-center">
                <div>
                    <p class="text-3xl font-bold">30</p>
                    <p class="text-sm text-purple-100">dias para instala√ß√£o</p>
                </div>
                <div>
                    <p class="text-3xl font-bold">45</p>
                    <p class="text-sm text-purple-100">dias para homologa√ß√£o</p>
                </div>
                <div>
                    <p class="text-3xl font-bold">15</p>
                    <p class="text-sm text-purple-100">dias para vistoria</p>
                </div>
                <div>
                    <p class="text-3xl font-bold">90</p>
                    <p class="text-sm text-purple-100">dias at√© gera√ß√£o total</p>
                </div>
            </div>
        </div>

        <!-- Bot√µes de A√ß√£o (ocultos na impress√£o) -->
        <div class="no-print flex gap-4 mb-8">
            <button onclick="window.print()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition">
                üñ®Ô∏è Imprimir / Salvar PDF
            </button>
            <button onclick="novaProposta()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition">
                üîÑ Nova Proposta
            </button>
        </div>

        <!-- Rodap√© -->
        <div class="bg-gray-100 rounded-lg p-6 text-center border-t-4 border-blue-600">
            <p class="text-sm text-gray-600 mb-2">
                <strong>Validade desta proposta:</strong> <span id="validade-proposta">10 dias</span>
            </p>
            <p class="text-sm text-gray-600">
                üìû <strong>Contato:</strong> (XX) XXXXX-XXXX | üìß <strong>E-mail:</strong> contato@empresa.com.br
            </p>
            <p class="text-xs text-gray-500 mt-2">
                Proposta gerada automaticamente pelo Sistema de Gera√ß√£o de Propostas Solar
            </p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/proposta.js"></script>
    <script src="js/script.js"></script>
    
    <script>
        // Alternar campos de grupo tarif√°rio
        function alternarCamposGrupo() {
            const grupoSelecionado = document.getElementById('grupo-tarifario').value;
            const camposB = document.getElementById('campos-grupo-b');
            const camposA = document.getElementById('campos-grupo-a');
            
            if (grupoSelecionado === 'A') {
                camposB.style.display = 'none';
                camposA.style.display = 'block';
            } else {
                camposB.style.display = 'block';
                camposA.style.display = 'none';
            }
        }

        // Nova proposta
        function novaProposta() {
            if (confirm('Deseja limpar todos os campos e iniciar uma nova proposta?')) {
                // Limpar formul√°rio
                document.getElementById('nome-cliente').value = '';
                document.getElementById('empresa-cliente').value = '';
                document.getElementById('cpf-cnpj').value = '';
                document.getElementById('telefone-cliente').value = '';
                document.getElementById('email-cliente').value = '';
                document.getElementById('consumo-total').value = '';
                document.getElementById('consumo-ponta').value = '';
                document.getElementById('consumo-fora-ponta').value = '';
                document.getElementById('outros-valores').value = '0';
                
                // Ocultar resultados
                document.getElementById('secao-resultados').style.display = 'none';
                
                // Scroll para o topo
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                // Focar no nome do cliente
                document.getElementById('nome-cliente').focus();
            }
        }

        // Carregar par√¢metros ao iniciar
        document.addEventListener('DOMContentLoaded', async function() {
            await carregarParametrosGerais();
            
            // Atualizar validade da proposta
            const validade = window.parametrosGerais?.validade_proposta || 10;
            const elemValidade = document.getElementById('validade-proposta');
            if (elemValidade) {
                elemValidade.textContent = validade + ' dias';
            }
        });
    </script>
</body>
</html>
